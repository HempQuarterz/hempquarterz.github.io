/**
 * Scholarly Theme - Ancient Text/Research/Knowledge/Wisdom Aesthetic
 * Parchment textures, floating letters, ink effects, candlelight
 */

/* ============================================================================
   COLOR PALETTE - Ancient Library & Candlelit Study
   ============================================================================ */

/* ============================================================================
   COLOR PALETTE - All4Yah Brand Kit v1
   ============================================================================ */

:root,
[data-theme="light"] {
  /* Brand Constants */
  --brand-midnight: #0E233B;
  --brand-parchment: #FBF5DB;
  /* Scroll Parchment */
  --brand-gold: #F9E4A4;
  /* Radiant Gold */
  --brand-teal: #609CB4;
  /* Data Light Blue */
  --brand-grey: #8E938F;
  /* Stone Grey */
  /* Muted Gold Shadow */
  --brand-gold-dark: #9C6F03;
  /* High Contrast Dark Gold for Text */

  /* Theme Mapping - Light Mode (Scroll/Study) */
  --parchment-light: var(--brand-parchment);
  --parchment-medium: #F3ECE0;
  /* Slightly darker shift for texture */

  --bg-primary: var(--brand-parchment) !important;
  --bg-secondary: #F3F4F6 !important;
  /* Off-white shadow for panels */

  --ink-dark: #111827;
  /* Dark Text */
  --ink-medium: #374151;
  --ink-light: var(--brand-grey);

  --text-primary: var(--ink-dark) !important;
  --text-secondary: var(--ink-medium) !important;

  --accent-primary: var(--brand-midnight) !important;
  /* In light mode, midnight is a strong accent */
  --accent-secondary: var(--brand-teal) !important;
  --button-text: var(--brand-parchment);

  /* Typography */
  --font-heading: 'Cinzel', serif;
  --font-body: 'Inter', sans-serif;
  --font-scripture: 'Cormorant Garamond', serif;

  /* Make body transparent so fixed backgrounds show */
  background-color: transparent !important;
}

/* Dark Mode - Celestial/Midnight Revelation */
[data-theme="dark"] {
  /* Theme Mapping - Dark Mode */
  --bg-primary: #0E233B !important;
  /* All4Yah Midnight */
  --bg-secondary: #132D4A !important;
  /* Slightly lighter midnight */

  --parchment-light: #FBF5DB;
  /* KEEP PARCHMENT LIGHT (Floating Scrolls) */
  --ink-dark: #111827;
  /* Text on parchment cards is always dark */

  --text-primary: var(--brand-gold) !important;
  /* Gold text directly on Midnight BG */
  --text-secondary: #E5E7EB !important;
  /* Light grey on Midnight */

  --accent-primary: var(--brand-gold) !important;
  --accent-secondary: var(--brand-teal) !important;

  --candle-glow: #F9E4A4;
  /* Gold glow */
}

/* Typography Application */
body {
  font-family: var(--font-body);
  background-color: transparent !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-heading);
  letter-spacing: 0.02em;
}

.scripture-text,
.verse-text {
  font-family: var(--font-scripture);
}

/* Button & Link Styles from Brand Kit */
a {
  color: var(--brand-teal);
  text-decoration: none;
}

.btn-primary {
  background-color: var(--brand-gold) !important;
  color: var(--brand-midnight) !important;
  font-family: var(--font-body);
  font-weight: 600;
  border: none;
}

.btn-secondary {
  background: transparent;
  border: 1px solid var(--brand-teal);
  color: var(--brand-parchment);
}

/* ============================================================================
   PARCHMENT BACKGROUND - SVG Texture Filter
   ============================================================================ */

.parchment-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -2;
  background: var(--bg-primary);
  filter: url(#parchmentTexture);
}

/* Light mode parchment gradient overlay - Adjusted to be richer/less white */
.parchment-background::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at 50% 30%,
      rgba(251, 245, 219, 0.95) 0%,
      /* Brand Parchment #FBF5DB */
      rgba(243, 236, 224, 0.85) 50%,
      rgba(225, 215, 195, 0.7) 100%);
  mix-blend-mode: multiply;
  /* Changed from overlay to multiply for richer color */
  opacity: 1;
  /* Increased opacity */
}

[data-theme="dark"] .parchment-background::before {
  background: radial-gradient(ellipse at 50% 30%,
      rgba(53, 43, 30, 0.9) 0%,
      rgba(31, 24, 16, 0.7) 50%,
      rgba(42, 35, 24, 0.5) 100%);
  opacity: 0.6;
}

/* Age spots and wear marks */
.parchment-background::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.03) 0%, transparent 3%),
    radial-gradient(circle at 75% 60%, rgba(101, 67, 33, 0.04) 0%, transparent 4%),
    radial-gradient(circle at 40% 80%, rgba(93, 64, 55, 0.02) 0%, transparent 2%),
    radial-gradient(circle at 85% 20%, rgba(112, 66, 20, 0.03) 0%, transparent 3%);
  opacity: 0.5;
}

/* ============================================================================
   CANDLE GLOW - Dark Mode Ambient Light
   ============================================================================ */

.candle-glow {
  position: fixed;
  top: -200px;
  left: 50%;
  transform: translateX(-50%);
  width: 800px;
  height: 800px;
  background: radial-gradient(ellipse at center,
      rgba(255, 183, 77, 0.06) 0%,
      rgba(255, 152, 0, 0.03) 40%,
      transparent 60%);
  z-index: -1;
  pointer-events: none;
  animation: candleFlicker 8s ease-in-out infinite;
  /* Slower, calmer */
  opacity: 0;
}

[data-theme="dark"] .candle-glow {
  opacity: 1;
}

@keyframes candleFlicker {

  0%,
  100% {
    opacity: 0.03;
    transform: translateX(-50%) scale(1);
  }

  50% {
    opacity: 0.05;
    /* Very subtle pulse */
    transform: translateX(-50%) scale(1.02);
  }
}

/* ============================================================================
   SVG FILTER DEFINITIONS
   ============================================================================ */

#parchmentTexture {
  /* Applied to .parchment-background via filter: url() */
}

/* ============================================================================
   PERFORMANCE OPTIMIZATIONS
   ============================================================================ */

.parchment-background,
.candle-glow {
  will-change: auto;
  /* Only animate when necessary */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ============================================================================
   GLOBAL PARCHMENT TEXTURE INTEGRATION
   ============================================================================ */

/* Apply parchment to all cards, inputs, and text areas */
.card,
input[type="text"],
input[type="search"],
input[type="email"],
textarea,
.verse-text,
.scripture-content,
.bible-text,
.manuscript-viewer {
  background-image: url('../assets/textures/parchment.png'), linear-gradient(to bottom right, var(--bg-secondary), var(--bg-primary));
  background-blend-mode: multiply;
  background-size: cover;
  border: 1px solid rgba(139, 69, 19, 0.2);
  box-shadow: inset 0 0 20px rgba(139, 69, 19, 0.05);
}

/* Specific overrides for Dark Mode - "Floating Scrolls" style */
/* Specific overrides for Dark Mode - "Floating Scrolls" style */
[data-theme="dark"] .card,
[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] .verse-text,
[data-theme="dark"] .scripture-content,
[data-theme="dark"] .manuscript-carousel,
[data-theme="dark"] .manuscript-slide,
[data-theme="dark"] .english-text,
[data-theme="dark"] .hebrew-text,
[data-theme="dark"] .greek-text {
  /* CRITICAL FIX: Override the gradient to be LIGHT, so 'multiply' works correctly */
  background-image: url('../assets/textures/parchment.png'), linear-gradient(to bottom right, #F4E8D8, #EDD9C0);
  background-blend-mode: multiply;

  /* Ensure the background color fallback is also light */
  background-color: var(--parchment-light);

  /* FORCE dark text */
  color: var(--ink-dark) !important;

  /* Make it pop against the dark starfield */
  border: 1px solid rgba(212, 175, 55, 0.5);
  /* Gold border */
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  /* Deep floating shadow */
}

/* Ensure headings inside dark mode cards are also dark ink, not gold */
[data-theme="dark"] .card h1,
[data-theme="dark"] .card h2,
[data-theme="dark"] .card h3,
[data-theme="dark"] .card h4,
[data-theme="dark"] .card strong,
[data-theme="dark"] .verse-text strong {
  color: var(--ink-dark) !important;
}

[data-theme="dark"] .card .btn {
  /* Buttons can stay gold/dark */
}

/* Simple Fade Animation for Page Stability */
@keyframes simpleFadeIn {
  from {
    opacity: 0;
    transform: translateY(5px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {

  .candle-glow,
  .page-turn-wrapper {
    animation: none !important;
    transition: none !important;
  }
}